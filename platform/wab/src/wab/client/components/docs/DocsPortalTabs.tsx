// This is a skeleton starter React component generated by Plasmic.
// This file is owned by you, feel free to edit as you see fit.
import { Tooltip } from "antd";
import * as React from "react";
import { U } from "../../cli-routes";
import {
  DefaultDocsPortalTabsProps,
  PlasmicDocsPortalTabs,
} from "../../plasmic/plasmic_kit_docs_portal/PlasmicDocsPortalTabs";
import { PublicLink } from "../PublicLink";
import { DocsTabKey, useDocsPortalCtx } from "./DocsPortalCtx";

interface DocsPortalTabsProps extends DefaultDocsPortalTabsProps {}

function DocsPortalTabs(props: DocsPortalTabsProps) {
  const docsCtx = useDocsPortalCtx();
  const projectId = docsCtx.studioCtx.siteInfo.id;
  const propsForButton = (key: DocsTabKey, tooltip: React.ReactNode) => {
    const codegenType = docsCtx.getCodegenType();
    const shouldHide = codegenType === "loader" && key === "images";
    return {
      wrap: (e) => {
        const to =
          key === "intro"
            ? U.projectDocs({ projectId })
            : key === "components"
            ? U.projectDocsComponents({
                projectId: projectId,
                codegenType,
              })
            : U.projectDocsIcons({
                projectId: projectId,
                codegenType,
              });
        if (shouldHide) {
          return null;
        }
        return (
          <Tooltip title={tooltip} placement="right">
            <PublicLink href={to}>{e}</PublicLink>
          </Tooltip>
        );
      },
    };
  };
  return (
    <PlasmicDocsPortalTabs
      {...props}
      intro={propsForButton("intro", "Get Started")}
      components={propsForButton("components", "Components")}
      images={propsForButton("images", "Icons")}
    />
  );
}

export default DocsPortalTabs;
